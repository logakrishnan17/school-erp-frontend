(this["webpackJsonpschool-erp-frontend"]=this["webpackJsonpschool-erp-frontend"]||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},33:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(30),r=n.n(i),l=(n(38),n(4)),s=n(5),c=n(10),u=n(9),m=n(15),d=n(1),h=(n(39),n(20),n(3)),p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={todo_description:"",todo_responsible:"",todo_priority:"",todo_completed:!1},a.onChangeTodoDescription=a.onChangeTodoDescription.bind(Object(h.a)(a)),a.onChangeTodoResponsible=a.onChangeTodoResponsible.bind(Object(h.a)(a)),a.onChangeTodoPriority=a.onChangeTodoPriority.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a}return Object(s.a)(n,[{key:"onChangeTodoDescription",value:function(e){this.setState({todo_description:e.target.value})}},{key:"onChangeTodoResponsible",value:function(e){this.setState({todo_responsible:e.target.value})}},{key:"onChangeTodoPriority",value:function(e){this.setState({todo_priority:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),console.log("Form submitted:"),console.log("Todo Description: ".concat(this.state.todo_description)),console.log("Todo Responsible: ".concat(this.state.todo_responsible)),console.log("Todo Priority: ".concat(this.state.todo_priority)),this.setState({todo_description:"",todo_responsible:"",todo_priority:"",todo_completed:!1})}},{key:"render",value:function(){return o.a.createElement("div",{style:{marginTop:10}},o.a.createElement("h3",null,"Create New Todo"),o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Description: "),o.a.createElement("input",{type:"text",className:"form-control",value:this.state.todo_description,onChange:this.onChangeTodoDescription})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Responsible: "),o.a.createElement("input",{type:"text",className:"form-control",value:this.state.todo_responsible,onChange:this.onChangeTodoResponsible})),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"priorityOptions",id:"priorityLow",value:"Low",checked:"Low"===this.state.todo_priority,onChange:this.onChangeTodoPriority}),o.a.createElement("label",{className:"form-check-label"},"Low")),o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"priorityOptions",id:"priorityMedium",value:"Medium",checked:"Medium"===this.state.todo_priority,onChange:this.onChangeTodoPriority}),o.a.createElement("label",{className:"form-check-label"},"Medium")),o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"priorityOptions",id:"priorityHigh",value:"High",checked:"High"===this.state.todo_priority,onChange:this.onChangeTodoPriority}),o.a.createElement("label",{className:"form-check-label"},"High"))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"submit",value:"Create Todo",className:"btn btn-primary"}))))}}]),n}(a.Component),g=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Welcome to Edit Student Component!!"))}}]),n}(a.Component),f=n(31),b=n.n(f),v=n(13),E=n.n(v),y="https://school-erp-backend.herokuapp.com/";var k=function(){function e(t){Object(l.a)(this,e),this.login=this.login.bind(this),this.getProfile=this.getProfile.bind(this)}return Object(s.a)(e,[{key:"login",value:function(e){var t=this;return function(e){return E.a.post(y+"/user/login",e).then((function(e){return console.log(e.data,"axios"),e.data})).catch((function(e){return console.log(e,"err"),e}))}(e).then((function(e){return e.token&&t.setToken(e.token),Promise.resolve(e)}))}},{key:"loggedIn",value:function(){return!!this.getToken()}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getProfile",value:function(){return b()(this.getToken())}},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}}]),e}(),C=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).student=function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.name?e.name:"-"),o.a.createElement("td",null,e.classDetails?e.classDetails.name:"-"),o.a.createElement("td",null,e.year?e.year:"-"),o.a.createElement("td",null,e.DOB?e.DOB:"-"),o.a.createElement("td",null,e.parentDetails?e.parentDetails.name:"-"),o.a.createElement("td",null,e.fee?e.fee:"-"),o.a.createElement("td",null,e.isPaidFee?"Paid":"Unpaid"),o.a.createElement("td",null,e.parentDetails?o.a.createElement("button",{disabled:!0,className:"btn-primary btn-disabled"},"Assigned"):o.a.createElement("button",{className:"btn-primary",onClick:function(){return a.updateStudent(e._id)}},"Assign")),o.a.createElement("td",null,o.a.createElement("button",{className:"btn-danger",onClick:function(){return a.deleteStudent(e._id)}},"Delete")))},a.state={studentsData:[]},a.Auth=new k,a.studentsList=a.studentsList.bind(Object(h.a)(a)),a.student=a.student.bind(Object(h.a)(a)),a.updateStudent=a.updateStudent.bind(Object(h.a)(a)),a.deleteStudent=a.deleteStudent.bind(Object(h.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;if(!this.Auth.loggedIn())return this.props.history.replace("/");(e=this.Auth.getToken(),E.a.get(y+"/student",{headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e),e}))).then((function(e){console.log(e,"studentsData"),e.data&&t.setState({studentsData:e.data})}))}},{key:"updateStudent",value:function(e){}},{key:"deleteStudent",value:function(e){var t,n,a=this;(t=this.Auth.getToken(),n=e,E.a.delete("".concat(y,"/student/").concat(n),{headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return console.log(e),e}))).then((function(t){if(t&&t.status&&200===t.status.code){var n=a.state.studentsData.filter((function(t){return t._id.toString()!==e.toString()}));a.setState({studentsData:n})}}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n={email:this.state.email,password:this.state.password};console.log(n,"loginData"),this.Auth.login(n).then((function(e){console.log(e,"tes"),e&&e.status&&200===e.status.code&&(t.Auth.setToken(e.token),t.props.history.replace("/list"))})).catch((function(e){console.log(e)}))}},{key:"studentsList",value:function(){var e=this;return this.state.studentsData.map((function(t,n){return e.student(t,n)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Students List"),o.a.createElement("table",{className:"table table-striped",style:{marginTop:20}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Class"),o.a.createElement("th",null,"Year"),o.a.createElement("th",null,"Date of Birth"),o.a.createElement("th",null,"Parent"),o.a.createElement("th",null,"Fees"),o.a.createElement("th",null,"Paid Status"),o.a.createElement("th",null,"Assign Parent"),o.a.createElement("th",null,"Delete Student"))),o.a.createElement("tbody",null,this.studentsList())))}}]),n}(a.Component),O=(a.Component,function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={email:"",password:""},a.onChangeEmail=a.onChangeEmail.bind(Object(h.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(h.a)(a)),a.onSubmit=a.onSubmit.bind(Object(h.a)(a)),a.Auth=new k,a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.Auth.loggedIn()&&this.props.history.replace("/list")}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var n={email:this.state.email,password:this.state.password};console.log(n,"loginData"),this.Auth.login(n).then((function(e){console.log(e,"tes"),e&&e.status&&200===e.status.code&&(t.Auth.setToken(e.token),t.props.history.replace("/list"))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",{id:"login"},o.a.createElement("h3",{className:"text-center text-white pt-5"},"Login form"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{id:"login-row",className:"row justify-content-center align-items-center"},o.a.createElement("div",{id:"login-column",className:"col-md-6"},o.a.createElement("div",{id:"login-box",className:"col-md-12"},o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("h3",{className:"text-center text-info"},"Login"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username",className:"text-info"},"Username:"),o.a.createElement("br",null),o.a.createElement("input",{type:"text",name:"username",id:"username",className:"form-control",value:this.state.email,onChange:this.onChangeEmail})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password",className:"text-info"},"Password:"),o.a.createElement("br",null),o.a.createElement("input",{type:"password",name:"password",id:"password",className:"form-control",value:this.state.password,onChange:this.onChangePassword})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"submit",name:"submit",className:"btn btn-info btn-md",value:"submit"}))))))))}}]),n}(a.Component)),S=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement(d.a,{path:"/",exact:!0,component:O}),o.a.createElement("div",{className:"container"},o.a.createElement(d.a,{path:"/list",exact:!0,component:C}),o.a.createElement(d.a,{path:"/edit/:id",component:g}),o.a.createElement(d.a,{path:"/create",component:p})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.16e8277e.chunk.js.map